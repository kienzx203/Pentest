# **Laravel Framework 10.x**

## **Kiến thức**

- [**Tài liệu tham khảo**](https://laravel.com/docs/10.x/deployment)

- Để sử dụng framework laravel chúng ta cần đến composer.

> **Vậy composer là gì?**

- Composer là công cụ quản lý các thư viện của PHP, bạn cần cài đặt trước khi sử dụng.

- [**Link tải composer**](https://getcomposer.org/download/)

- Chúng ta sẽ đi tìm hiểu về file `composer.json`:

```json
    "require": {
        "php": "^7.3|^8.0",
        "fruitcake/laravel-cors": "^2.0",
        "guzzlehttp/guzzle": "^7.3",
        "laravel/framework": "^8.54",
        "laravel/sanctum": "^2.11",
        "laravel/tinker": "^2.5"
    },
    "require-dev": {
        "facade/ignition": "^2.5",
        "fakerphp/faker": "^1.9.1",
        "laravel/sail": "^1.0.1",
        "mockery/mockery": "^1.4.2",
        "nunomaduro/collision": "^5.0",
        "phpunit/phpunit": "^9.3.3"
    }
```

- **Khối require(Môi trường production)**: Các package liên quan đến việc vận hành của project. Ví dụ như thanh toán, convert ngày giờ ...
- **Khối require-dev(Môi trường develop, Staging)**: Các package liên quan đến việc phát triển(phpcs, phpcodesniffer, phpunit), setup môi trường(sail), debug(debugbar) và những package có tiềm ẩn những lỗ hổng bảo mật

- Như vậy, trên môi trường Development & Staging để cài đặt tất cả các package nằm trong khối require và require-dev bạn chỉ cần chạy `composer install`. Khi bạn cài đặt trên môi trường Production, bạn chỉ mong muốn cài đặt các package nằm trong khối require. Bạn nên chạy với lệnh `composer install --no-dev`.

- `Composer install`: Khi chạy câu lệnh trên, nó sẽ kiểm tra sự tồn tại của file composer.lock trước. Nếu không tồn tại, sẽ đọc các dependencies từ file composer.json ra. Sau đó tiến hành tạo file composer.lock.
    - Nếu file composer.lock tồn tại. Nó sẽ tải về chính xác version của các dependencies được cài đặt trong project.

- `Composer update`: Nếu file composer.json không tồn tại. Thông báo không có sự tồn tại của file này và yêu cầu tạo file composer.json.
    - Nếu file composer.json tồn tại. Cài đặt phiên bản mới nhất được định nghĩa trong file composer.json sau đó cập nhật version đã cài đặt vào file composer.lock

```json
"require": {
    "vendor/package": "1.3.2", // Chính xác phiên bản 1.3.2

    // >, <, >=, <= | Giới hạn trên / Giới hạn dưới
    "vendor/package": ">=1.3.2", // Các package có phiên bản lớn hơn hoặc bằng 1.3.2
    "vendor/package": "<1.3.2", // Các package nhỏ hơn 1.3.2

    // * | Kí tự đại diện
    "vendor/package": "1.3.*", // >=1.3.0 <1.4.0

    // ~ | Cho phép chữ số cuối cùng được chỉ định đi lên
    "vendor/package": "~1.3.2", // >=1.3.2 <1.4.0
    "vendor/package": "~1.3", // >=1.3.0 <2.0.0

    // ^ | Không cho phép thay đổi lớn(breaking changes)
    "vendor/package": "^1.3.2", // >=1.3.2 <2.0.0
    "vendor/package": "^0.3.2", // >=0.3.2 <0.4.0 // Ngoại trừ version 0
}
```
- `composer dump-autoload`: 
```
vendor/composer
├── autoload_classmap.php
├── autoload_files.php
├── autoload_namespaces.php
├── autoload_psr4.php
├── autoload_real.php
├── autoload_static.php
├── ClassLoader.php
├── installed.json
└── LICENSE
``` 

- `php artisan serve`: Để chạy mặc định port 8000.

- **Lưu ý:**
    - env: file chứa các biến môi trường.

> **Cấu trúc thư mục vòng đời request trong laravel**

![](./img_laravel/Screenshot%202023-10-11%20112314.png)

- Exceptions/handler.php: là file liên quan đến điều hướng lỗi.

- Providers: là nơi khởi tạo các service.

- Bootstrap: file khởi động khi bắt đầu có request.

![](./img_laravel/Screenshot%202023-10-11%20113839.png)

- storage: nơi lưu trữ, chứa file upload.

- vendor: nơi chứa thư viện liên quan project.

## **Thiết lập router Laravel**

- Router liên quan xác định đường dẫn URL.

> **Router/web.api**

![](./img_laravel/Screenshot%202023-10-11%20141335.png)

- Ví dụ về Route:match:

```
Route::match(['get','post'],'/hehe', function(){
    return view('welcome');
});
```

![](./img_laravel/Screenshot%202023-10-11%20142938.png)

![](./img_laravel/Screenshot%202023-10-11%20143526.png)


- Đối với truyền tham số:

![](./img_laravel/Screenshot%202023-10-11%20144727.png)

- Bất lợi ở đây là tham số phải mặc định.

- Với điều kiện không bắt buộc.

![](./img_laravel/Screenshot%202023-10-11%20144727.png)
![](./img_laravel/Screenshot%202023-10-11%20145233.png)

- Thiết lập middleware:

![](./img_laravel/Screenshot%202023-10-11%20150637.png)

## **Thiết lập controller Laravel**

![](./img_laravel/Screenshot%202023-10-11%20154958.png)
![](./img_laravel/Screenshot%202023-10-11%20164505.png)
![](./img_laravel/Screenshot%202023-10-11%20164710.png)


> **Resource controller**

![](./img_laravel/Screenshot%202023-10-11%20165509.png)

![](./img_laravel/Screenshot%202023-10-11%20170437.png)


## **Thiếp lập bộ lọc trung gian (Middleware)**

![](./img_laravel/Screenshot%202023-10-12%20091316.png)

- [**Tài liệu**](https://laravel.com/docs/10.x/middleware)

- Mục đích Middleware dùng để lọc request để trước khi nó thực hiện

## **Thiếp lập view**

- Nằm trong thư mục resource/views 

![](./img_laravel/Screenshot%202023-10-12%20095840.png)

![](./img_laravel/Screenshot%202023-10-12%20100234.png)
![](./img_laravel/Screenshot%202023-10-12%20100321.png)

- Đối với controller xử lý tham số

![](./img_laravel/Screenshot%202023-10-12%20100624.png)

![](./img_laravel/Screenshot%202023-10-12%20103140.png)


## **Blade Template Engine**

- Cú pháp blade:

![](./img_laravel/Screenshot%202023-10-12%20113706.png)

- [**Tài liệu**](https://laravel.com/docs/8.x/blade)

> **Tìm hiểu về Master layout**

![](./img_laravel/Screenshot%202023-10-12%20141627.png)

> **Tìm hiểu response trong laravel**

![](./img_laravel/Screenshot%202023-10-12%20162539.png)

- Gán thông tin header:

![](./img_laravel/Screenshot%202023-10-12%20162841.png)
![](./img_laravel/Screenshot%202023-10-12%20163746.png)


## **Validation**

![](./img_laravel/Screenshot%202023-10-13%20201323.png)
![](./img_laravel/Screenshot%202023-10-13%20202849.png)
![](./img_laravel/Screenshot%202023-10-13%20205752.png)

> **Validation sử dụng form request**

![](./img_laravel/Screenshot%202023-10-13%20210111.png)
![](./img_laravel/Screenshot%202023-10-13%20211340.png)
![](./img_laravel/Screenshot%202023-10-13%20214955.png)
![](./img_laravel/Screenshot%202023-10-13%20215414.png)

> **Cách tạo rule cho riêng mình**

![](./img_laravel/Screenshot%202023-10-13%20222049.png)
![](./img_laravel/Screenshot%202023-10-13%20231920.png)
![](./img_laravel/Screenshot%202023-10-13%20235709.png)
![](./img_laravel/Screenshot%202023-10-14%20000242.png)

## **Làm việc với Database**

![](./img_laravel/Screenshot%202023-10-14%20003737.png)

> **Thiết lập cấu hình**

- Thiết lập trong config/database.php hoặc file .env

![](./img_laravel/Screenshot%202023-10-14%20003935.png)
![](./img_laravel/Screenshot%202023-10-14%20004047.png)
![](./img_laravel/Screenshot%202023-10-14%20013501.png)
![](./img_laravel/Screenshot%202023-10-14%20013951.png)

> **Thiết lập model sử lý database**

![](./img_laravel/Screenshot%202023-10-15%20222933.png)
![](./img_laravel/Screenshot%202023-10-15%20223039.png)
![](./img_laravel/Screenshot%202023-10-15%20223331.png)